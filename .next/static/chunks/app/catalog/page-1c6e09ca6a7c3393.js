(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[694],{667:e=>{e.exports={container:"Page_container__tj5qz"}},3256:e=>{e.exports={container:"Filters_container__C8v4l",location:"Filters_location__F5RI4",locationText:"Filters_locationText__S5uI9",input:"Filters_input__KLVxa",icon:"Filters_icon__I27ny",field:"Filters_field__hMVLt",filterText:"Filters_filterText__gwhoQ",vehicleTitle:"Filters_vehicleTitle__Dhmbd",divider:"Filters_divider__twb2V",checkbox:"Filters_checkbox__aLrPO",radio:"Filters_radio__7uENr",categoryList:"Filters_categoryList__dZsFI",vehicleList:"Filters_vehicleList___TjUu",categoryItem:"Filters_categoryItem__I8W_7",vehicleItem:"Filters_vehicleItem__2CpfF",itemContent:"Filters_itemContent__CIa2o",radioRow:"Filters_radioRow__6REE7",active:"Filters_active__wH8_t",itemText:"Filters_itemText__1GM_y",vehicleLabel:"Filters_vehicleLabel__KhNVg",searchBtn:"Filters_searchBtn__aKEUX"}},3995:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var a=i(5155);function l(e){let{name:t,width:i=24,height:l=24,className:s}=e;return(0,a.jsx)("svg",{width:i,height:l,className:s,"aria-hidden":"true",children:(0,a.jsx)("use",{href:"/icons.svg#icon-".concat(t)})})}},6664:e=>{e.exports={container:"CampersList_container__mt1QM",list:"CampersList_list__mA4f3",listItem:"CampersList_listItem___xcme",categoryList:"CampersList_categoryList__YLLut",img:"CampersList_img__y0PF8",likeActive:"CampersList_likeActive__sN702",mainInfo:"CampersList_mainInfo__vri4X",name:"CampersList_name__o1Bfv",price:"CampersList_price__KAfDv",textPrice:"CampersList_textPrice__UkqJO",like:"CampersList_like__6L5Hw",info:"CampersList_info__qGxxT",infoCont:"CampersList_infoCont__upyG0",infoText:"CampersList_infoText__UHvTR",description:"CampersList_description__1R4cK",categoryItem:"CampersList_categoryItem__O9Z4A",itemContent:"CampersList_itemContent___Q3Zq",itemText:"CampersList_itemText__mA441",button:"CampersList_button__GWCFt",loadMoreBtn:"CampersList_loadMoreBtn__0l70R"}},8062:(e,t,i)=>{"use strict";i.d(t,{default:()=>f});var a=i(5155),l=i(2619),s=i.n(l),c=i(6664),r=i.n(c),n=i(5239),o=i(3995),d=i(5125),h=i(2115);function m(e){let{city:t,selectedFeatures:i,selectedVehicle:l}=e,c=[{key:"transmission",label:"Automatic",icon:"diagram"},{key:"AC",label:"AC",icon:"ac"},{key:"engine",label:"Petrol",icon:"petrol"},{key:"kitchen",label:"Kitchen",icon:"cup"},{key:"radio",label:"Radio",icon:"radio"},{key:"bathroom",label:"Bathroom",icon:"shower"},{key:"refrigerator",label:"Refrigerator",icon:"fridge"},{key:"microwave",label:"Microwave",icon:"microwave"},{key:"gas",label:"Gas",icon:"gas"},{key:"water",label:"Water",icon:"water"}],[m,_]=(0,h.useState)([]),[u,p]=(0,h.useState)(0),[x,y]=(0,h.useState)(1),[g,v]=(0,h.useState)(!1),[b,j]=(0,h.useState)(()=>{try{let e=localStorage.getItem("favorite_campers");return e?JSON.parse(e):[]}catch(e){return[]}});if((0,h.useEffect)(()=>{try{localStorage.setItem("favorite_campers",JSON.stringify(b))}catch(e){}},[b]),(0,h.useEffect)(()=>{y(1),_([]),p(0)},[t,i,l]),(0,h.useEffect)(()=>{(async()=>{try{v(!0);let e=Array.from(i).join(","),{items:a,total:s}=(await d.A.get("/api/campers",{params:{city:t,vehicle:null!=l?l:"",features:e,page:x,pageSize:4}})).data;_(e=>1===x?a:[...e,...a]),p(s)}catch(e){console.error("Failed to fetch campers",e)}finally{v(!1)}})()},[t,i,l,x]),g&&0===m.length)return(0,a.jsx)("p",{children:"Loading..."});if(!m||0===m.length)return(0,a.jsx)("p",{children:"No campers match your filters."});let f=m.length<u;return(0,a.jsxs)("div",{className:r().container,children:[(0,a.jsx)("ul",{className:r().list,children:m.map(e=>{var t,i,l;let d=null!=(i=null==(t=e.reviews)?void 0:t.length)?i:0,h=(null!=(l=e.reviews)?l:[]).reduce((e,t)=>e+t.reviewer_rating,0),m=d?(h/d).toFixed(1):"0.0",_=b.includes(e.id);return(0,a.jsxs)("li",{className:r().listItem,children:[(0,a.jsx)(n.default,{src:e.gallery[0].original,alt:e.name,width:292,height:320,className:r().img}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:r().mainInfo,children:[(0,a.jsx)("h2",{className:r().name,children:e.name}),(0,a.jsxs)("div",{className:r().price,children:[(0,a.jsxs)("p",{className:r().textPrice,children:["â‚¬",e.price]}),(0,a.jsx)("span",{className:"".concat(r().like," ").concat(_?r().likeActive:r().likeInactive),onClick:()=>{let t;return t=e.id,j(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},role:"button","aria-pressed":_,"aria-label":_?"Remove from favorites":"Add to favorites",tabIndex:0,children:(0,a.jsx)(o.A,{name:"like",width:26,height:24})})]})]}),(0,a.jsxs)("div",{className:r().info,children:[(0,a.jsxs)("div",{className:r().infoCont,children:[(0,a.jsx)(o.A,{name:"yelstar",width:16,height:16,className:r().star}),(0,a.jsxs)("p",{className:r().infoText,children:[m," (",d," Reviews)"]})]}),(0,a.jsxs)("div",{className:r().infoCont,children:[(0,a.jsx)(o.A,{name:"wall",width:16,height:16}),(0,a.jsx)("p",{className:r().infoText,children:e.location})]})]}),(0,a.jsx)("p",{className:r().description,children:e.description}),(0,a.jsx)("ul",{className:r().categoryList,children:c.map(t=>e[t.key]?(0,a.jsx)("li",{className:r().categoryItem,children:(0,a.jsxs)("div",{className:r().itemContent,children:[(0,a.jsx)(o.A,{name:t.icon,width:20,height:20}),(0,a.jsx)("span",{className:r().itemText,children:t.label})]})},t.key):null)}),(0,a.jsx)(s(),{href:"/catalog/".concat(e.id),className:r().button,children:"Show more"})]})]},e.id)})}),f&&(0,a.jsx)("div",{className:r().loadMoreWrap,children:(0,a.jsx)("button",{type:"button",className:r().loadMoreBtn,onClick:()=>y(e=>e+1),disabled:g,children:"Load more"})})]})}var _=i(667),u=i.n(_),p=i(3256),x=i.n(p);function y(e){let{value:t="",onChange:i,placeholder:l="City",selectedFeatures:s,onToggleFeature:c,vehicleTypes:r,selectedVehicle:n,onSelectVehicle:d,onSearch:h}=e;return(0,a.jsxs)("div",{className:x().container,children:[(0,a.jsxs)("div",{className:x().location,children:[(0,a.jsx)("label",{htmlFor:"location",className:x().locationText,children:"Location"}),(0,a.jsxs)("div",{className:x().field,children:[(0,a.jsx)("input",{id:"location",type:"text",value:t,onChange:e=>i(e.target.value),placeholder:l,className:x().input}),(0,a.jsx)(o.A,{name:"wall",width:20,height:20,className:x().icon})]})]}),(0,a.jsx)("h4",{className:x().filterText,children:"Filters"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:x().vehicleTitle,children:"Vehicle equipment"}),(0,a.jsx)("hr",{className:x().divider}),(0,a.jsx)("ul",{className:x().categoryList,children:[{key:"transmission",label:"Automatic",icon:"diagram"},{key:"AC",label:"AC",icon:"ac"},{key:"engine",label:"Petrol",icon:"petrol"},{key:"kitchen",label:"Kitchen",icon:"cup"},{key:"radio",label:"Radio",icon:"radio"},{key:"bathroom",label:"Bathroom",icon:"shower"},{key:"refrigerator",label:"Refrigerator",icon:"fridge"},{key:"microwave",label:"Microwave",icon:"microwave"},{key:"gas",label:"Gas",icon:"gas"},{key:"water",label:"Water",icon:"water"}].map(e=>{let t=s.has(e.key);return(0,a.jsx)("li",{className:"".concat(x().categoryItem," ").concat(t?x().active:""),children:(0,a.jsxs)("label",{className:x().itemContent,children:[(0,a.jsx)("input",{type:"checkbox",className:x().checkbox,name:"feature-".concat(e.key),value:e.key,checked:t,onChange:()=>c(e.key)}),(0,a.jsx)(o.A,{name:e.icon,width:32,height:32}),(0,a.jsx)("span",{className:x().itemText,children:e.label})]})},e.key)})})]}),(0,a.jsxs)("div",{className:x().radioGroup,"aria-labelledby":"vt-label",children:[(0,a.jsx)("h3",{id:"vt-label",className:x().vehicleTitle,children:"Vehicle type"}),(0,a.jsx)("hr",{className:x().divider}),(0,a.jsx)("ul",{className:x().vehicleList,children:r.map(e=>(0,a.jsx)("li",{className:"".concat(x().vehicleItem," ").concat(n===e.key?x().active:""),children:(0,a.jsxs)("label",{className:x().radioRow,children:[(0,a.jsx)("input",{type:"radio",name:"vehicleType",value:e.key,checked:n===e.key,onChange:()=>d(e.key),className:x().radio}),(0,a.jsx)(o.A,{name:e.icon,width:32,height:32}),(0,a.jsx)("span",{className:x().vehicleLabel,children:e.label})]})},e.key))})]}),(0,a.jsx)("button",{type:"button",className:x().searchBtn,onClick:h,children:"Search"})]})}let g=e=>{let t,i=new Set,a=(e,a)=>{let l="function"==typeof e?e(t):e;if(!Object.is(l,t)){let e=t;t=(null!=a?a:"object"!=typeof l||null===l)?l:Object.assign({},t,l),i.forEach(i=>i(t,e))}},l=()=>t,s={setState:a,getState:l,getInitialState:()=>c,subscribe:e=>(i.add(e),()=>i.delete(e))},c=t=e(a,l,s);return s},v=e=>{let t=(e=>e?g(e):g)(e),i=e=>(function(e,t=e=>e){let i=h.useSyncExternalStore(e.subscribe,h.useCallback(()=>t(e.getState()),[e,t]),h.useCallback(()=>t(e.getInitialState()),[e,t]));return h.useDebugValue(i),i})(t,e);return Object.assign(i,t),i},b=(e=>e?v(e):v)(e=>({city:"",selectedFeatures:new Set,selectedVehicle:null,page:1,appliedCity:"",appliedFeatures:new Set,appliedVehicle:null,setCity:t=>e({city:t}),toggleFeature:t=>e(e=>{let i=new Set(e.selectedFeatures);return i.has(t)?i.delete(t):i.add(t),{selectedFeatures:i}}),selectVehicle:t=>e({selectedVehicle:t}),resetPage:()=>e({page:1}),nextPage:()=>e(e=>({page:e.page+1})),onSearch:()=>e(e=>({page:1,appliedCity:e.city,appliedFeatures:new Set(e.selectedFeatures),appliedVehicle:e.selectedVehicle}))})),j=[{key:"panelTruck",label:"Van",icon:"3s"},{key:"fullyIntegrated",label:"Fully Integrated",icon:"4s"},{key:"alcove",label:"Alcove",icon:"9s"}];function f(){let{city:e,setCity:t,selectedFeatures:i,toggleFeature:l,selectedVehicle:s,selectVehicle:c,onSearch:r,appliedCity:n,appliedFeatures:o,appliedVehicle:d}=b();return(0,a.jsxs)("div",{className:u().container,children:[(0,a.jsx)("section",{children:(0,a.jsx)(y,{value:e,onChange:t,selectedFeatures:i,onToggleFeature:l,vehicleTypes:j,selectedVehicle:s,onSelectVehicle:c,onSearch:r})}),(0,a.jsx)("section",{children:(0,a.jsx)(m,{city:n,selectedFeatures:o,selectedVehicle:d})})]})}},8558:(e,t,i)=>{Promise.resolve().then(i.bind(i,8062))}},e=>{e.O(0,[676,356,619,939,441,255,358],()=>e(e.s=8558)),_N_E=e.O()}]);